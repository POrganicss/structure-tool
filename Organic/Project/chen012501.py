import __init__
from Tool.File import File
from Tool.Code import Code
from Format.Xyz import Xyz


OPT = Code.set(nproc=12, additional='em=gd3bj',method='B3LYP/6-31g(d)', name='Pd01', mixset=[['Pd','Br'], ['SDD']])
name = Code.getname(OPT['name'])

xyz=''' C                  3.63935600    0.92308700   -2.69522300
 C                  3.63436200    1.14134700   -1.30227400
 C                  2.83980800    0.28356000   -0.50897700
 C                  2.09863100   -0.89241200   -2.36533600
 C                  2.85591500   -0.08214200   -3.22564700
 H                  4.23556600    1.56553300   -3.33695100
 H                  1.45399900   -1.67231400   -2.74848600
 H                  2.80776000   -0.25590600   -4.29495400
 C                  2.71219400    0.53854100    0.89848100
 C                  3.39492100    1.62498500    1.48900900
 C                  1.62544200    0.01007000    2.87486400
 C                  3.16179300    1.86067900    2.86129300
 C                  2.27350700    1.05863200    3.55177400
 H                  0.89005500   -0.62606300    3.35614100
 H                  3.66689800    2.68616600    3.35512800
 H                  2.05721000    1.23344400    4.60002800
 C                  4.35463800    2.20928500   -0.66903200
 H                  4.97547100    2.84870600   -1.28978100
 C                  4.24285600    2.44084400    0.66903200
 H                  4.77451300    3.26663900    1.13290500
 N                  1.85945300   -0.24760100    1.59696700
 N                  2.11487800   -0.74217100   -1.04367900
 Pd                 0.85652600   -1.66861900    0.32737300
 C                 -1.37377700   -2.89597000   -1.00673300
 C                 -0.03632300   -2.95818000   -0.90061300
 C                 -2.20074600   -3.77839900   -1.91736800
 C                  0.85886000   -4.00555100   -1.51231400
 H                 -1.59730600   -4.54657300   -2.40417400
 H                 -3.00029100   -4.27904000   -1.35543200
 H                 -2.68758700   -3.19672900   -2.71182000
 H                  0.39526200   -4.55093600   -2.34390800
 H                  1.79966000   -3.58163200   -1.88154700
 H                  1.13998600   -4.74333300   -0.74896600
 C                 -2.17173300   -1.93741200   -0.13320800
 C                 -3.57757200   -1.70932500   -0.43036500
 C                 -1.78902500   -1.90003700    1.28922200
 C                 -4.47778800   -1.32481700    0.52118100
 C                 -2.77573300   -1.53816200    2.25720600
 C                 -4.06395800   -1.25743300    1.88212000
 H                 -5.50207000   -1.08603300    0.25327200
 H                 -2.46202100   -1.49585600    3.29479800
 H                 -4.78791400   -0.97198600    2.64189000
 H                 -1.71954800   -0.80730400   -0.53319100
 O                 -0.59426000   -2.14531000    1.68968900
 H                 -3.88632600   -1.77100700   -1.46895300
 O                 -1.13426500    0.29519200   -1.13637600
 S                 -0.78858900    1.45147600   -0.18168700
 C                 -2.11392600    2.62721200   -0.46006300
 C                 -3.36409200    2.37503700    0.10942700
 C                 -1.89538200    3.74806200   -1.25771800
 C                 -4.41107900    3.26188100   -0.13350400
 H                 -3.50157300    1.50184600    0.73778700
 C                 -2.94961500    4.63261700   -1.49274500
 H                 -0.90789500    3.91573300   -1.67331600
 C                 -4.20562300    4.38922200   -0.93441300
 H                 -5.38777200    3.07711100    0.30532800
 H                 -2.78925600    5.51219700   -2.11012800
 H                 -5.02431300    5.07941600   -1.11890000
 O                  0.47114100    2.10671100   -0.58754800
 O                 -0.90024800    1.02938600    1.23043200'''
print(OPT)

para=Code.get(OPT)
print(para)


para['opt'] = para['opt'].replace('calcfc', 'calcall')+',tight,maxstep=1,notrust'
if 'freq' not in para['additional']:
    para['additional'] = para['additional']+' freq'
if 'int=superfine' not in para['additional']:
    para['additional'] = para['additional']+' int=superfine'
para['name'] = name+'_02'
print(Code.topara(para))
    #进行第二次几何优化
    
gjf = Xyz.togjf(xyz, Code.topara(para))
print(gjf)
